//import java.io.InputStream;
import java.util.Scanner;

/*
 * This Java source file was generated by the Gradle 'init' task.
 */
public class Application {

    

    public static void main(String[] args) {
    	Scanner input = new Scanner(System.in);
    	
    	System.out.println("Card Inserted.  Welcome New User");
    	System.out.println("Please Select a 4 digit Personal Indentification Number.");
    	
    	int pinNumber = input.nextInt();
    	
    	System.out.println("Please reenter PIN to verify.");
    	
    	int pinVerify = input.nextInt();
    	
    	while(pinVerify != pinNumber) {
    		System.out.println("PIN numbers did not match");
    		System.out.println("Please select a 4 digit Personal Indentification Number.");
    	
    	pinNumber = input.nextInt();
    	
    	System.out.println("Please reenter PIN to verify.");
    	
    	pinVerify = input.nextInt();
    	
    	
    	
    	}
    	
    	Atm pinATM = new Atm(pinNumber);
		
		//pass PIN to method for verification
    	int userPIN = pinATM.checkPIN(pinNumber);
    	
    	//Display PIN to make sure I did the code right.
    	System.out.println("Your PIN is " + userPIN);
    	System.out.println("Please Enter 4 digit Personal Indentification Number.");
		pinNumber = input.nextInt();
    	
    	
    	while(pinNumber != userPIN) {
    		System.out.println("Please Enter 4 digit Personal Indentification Number.");
    		pinNumber = input.nextInt();
    		
    	}
    	
    	//refactored method menu options to a method
    	int atmOption = mainUserMenu(input);
        
       //while statement to prompt user to enter a valid response
        while (atmOption >= 5) {
        	System.out.println("Invalid Option, please select from an option below.");
        	

        	atmOption = mainUserMenu(input);
        	
        	
        	
        }//end while
        
        
        atmOption = optionSwitch(input, atmOption);//close switch
    
        
   
    
       System.out.println(atmOption);
        
        
     
        
    }//close method

    //method for switch
	private static int optionSwitch(Scanner input, int atmOption) {
		switch(atmOption) {
        case 1: 
        	System.out.println("Withdraw");
        	System.out.println("How much would you like to take out?");
        	System.out.println("Please enter the amount in multiples of 10's.");
        	System.out.println("How much would you like to withdraw (enter 50 for test)?");
    		int withdraw = input.nextInt();
    		
    		
    		
    		
    		Atm withdrawATM = new Atm(200);
    		
    		int originalBalance = withdrawATM.checkBalance(); //runs checkbalance method
    		withdrawATM.withdraw(withdraw); //runs withdraw method
    		int newBalance = withdrawATM.checkBalance(); //runs balance code to check balance
    		
    		//while for determining 10's
    		while(withdraw % 10 != 0) {
    			System.out.println("Invalid amount, enter multiples of $10's");
    			System.out.println("How much would you like to withdraw (enter 50 for test)?");
        		withdraw = input.nextInt();
        		
        		withdrawATM = new Atm(200);
        		
        		originalBalance = withdrawATM.checkBalance(); //runs checkbalance method
        		withdrawATM.withdraw(withdraw); //runs withdraw method
        		newBalance = withdrawATM.checkBalance();
    		}//close while
    		//while Statement to allow user to enter another withdrawal amount again
    		//also prompts user to enter withdrawal amount again
    		while(originalBalance == newBalance) {
    			System.out.println("You attempted to with draw $" + withdraw +". However, your current balance is $" + originalBalance + ".");
    			System.out.println("Please enter a smaller amount");
    			
    			System.out.println("How much would you like to withdraw (enter 50 for test)?");
        		withdraw = input.nextInt();
        		
        		withdrawATM = new Atm(200);
        		
        		originalBalance = withdrawATM.checkBalance(); //runs checkbalance method
        		withdrawATM.withdraw(withdraw); //runs withdraw method
        		newBalance = withdrawATM.checkBalance();
        		//nested while to ensure that they still enter the new amount in multiples of 10.
        		while(withdraw % 10 != 0) {
        			System.out.println("Invalid amount, enter multiples of $10's");
        			System.out.println("How much would you like to withdraw (enter 50 for test)?");
            		withdraw = input.nextInt();
            		
            		withdrawATM = new Atm(200);
            		
            		originalBalance = withdrawATM.checkBalance(); //runs checkbalance method
            		withdrawATM.withdraw(withdraw); //runs withdraw method
            		newBalance = withdrawATM.checkBalance();
        		}//close nested while
    			
    		}//close while
    		
    		
    		//testing to show balance information
    		System.out.println("Processing transaction for $" + withdraw +".");
    		System.out.println("New Balance is $" + newBalance + ".");
    		
        	
        	
        	break;
        case 2:
        	System.out.println("You selected deposit");
        	atmOption = 72;
        	break;
        case 3:
        	//sets references for checking balance, assuming a start of 200
        	Atm atmBalance = new Atm(200);
        	
        	int userBalance = atmBalance.checkBalance();
        	
        	System.out.println("Your balance is " + userBalance);
        	System.out.println("What would you like to do?");
        	System.out.println("1. Withdrawal");
            System.out.println("2. Deposit");
            System.out.println("3. Quit");
        	
        	break;
        case 4:
        	exitMessage();
        }
		return atmOption;
	}

	private static void exitMessage() {
		System.out.println("Thank you for choosing the Fry National Bank!");
		System.out.println("Visit us on the web at www.frybank.com.  Download our app!");
		System.exit(0);
	}//close exitMessage

	private static int mainUserMenu(Scanner input) {
		System.out.println("Welcome to The Fry National Bank!");
        System.out.println("What can we do for you today?");
        System.out.println("1. Withdrawal");
        System.out.println("2. Deposit");
        System.out.println("3. Check Balance");
        System.out.println("4. Quit");
        
        
        
        int atmOption = input.nextInt();
		return atmOption;
	}//close mainUserMenu
}//close class
	

